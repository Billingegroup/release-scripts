name: Gather coverage report and upload to codecov

on:
  push:
    branches:
      - main
  release:
    types:
      - prereleased
      - published
  workflow_dispatch: null

jobs:
  coverage:
    uses: Billingegroup/release-scripts/.github/workflows/_codecov.yml@{{ VERSION/v0 }}
    with:
      project: {{ PROJECT/PROJECT_NAME }}
      c_extension: {{ C_EXTENSION/false }}
      headless: {{ HEADLESS/false }}
